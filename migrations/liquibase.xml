<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="181006092018" author="Pratibha">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="instance_tracker" schemaName="public"/>
            </not>
        </preConditions>
        <comment>Creating tracker table for tracked entity instance in public schema</comment>
        <sql>
            CREATE TABLE public.instance_tracker(
                patient_id text,
                instance_id text PRIMARY KEY,
                created_by text,
                created_date TIMESTAMP
            );
        </sql>
    </changeSet>
    <changeSet id="035730082018" author="Mahitha">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="marker" schemaName="public"/>
            </not>
        </preConditions>
        <comment>Creating Marker table to track last sync date time in public schema</comment>
        <sql>
            CREATE TABLE public.marker(
                marker_id SERIAL PRIMARY KEY,
                program_name TEXT,
                category TEXT,
                last_synced_date TIMESTAMP
            );
        </sql>
    </changeSet>
    <changeSet id="145410092018" author="Pratibha">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="enrolment_tracker" schemaName="public"/>
            </not>
        </preConditions>
        <comment>Creating tracker table for program enrolment in public schema</comment>
        <sql>
            CREATE TABLE public.enrolment_tracker(
                enrolment_id text PRIMARY KEY,
                instance_id text,
                program_name text,
                program_start_date TIMESTAMP,
                status text,
                created_by text,
                created_date TIMESTAMP
            );
        </sql>
    </changeSet>
</databaseChangeLog>